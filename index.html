<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>王宏梅の施旺国</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
    <META HTTP-EQUIV="Cache-Control" CONTENT="no-cache">
    <META HTTP-EQUIV="Expires" CONTENT="0">

    <style type="text/css">
        @font-face {
            font-family: digit;
            src: url('digital-7_mono.ttf') format("truetype");
        }
    </style>
    <link href="default.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="garden.js"></script>
    <script type="text/javascript" src="functions_dev.js"></script>
    <script type="text/javascript" src="jq.snow.js"></script>
</head>

<body>
<div id="test1" style="display: none;">
    ------------------
</div>
<audio id="bgmMusic" src="" autoplay="autoplay" loop="loop" preload="auto" type="audio/mp3"></audio>
<!--下面是调用方法和参数说明-->
<script>
    var u = navigator.userAgent;
    //判断是否是ios终端
    var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);
    //判断是否是android终端
    var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1;
    //判断是否是微信
    var ua = window.navigator.userAgent.toLowerCase();
    var isweixing=ua.match(/MicroMessenger/i) == 'micromessenger';
    if(isAndroid){
        $("#test1").append("<p>安卓v4.0</p>")
        setTimeout(function () {
            window.location.href="https://shiwangguo.github.io/hm1?timeStr="+new Date().getTime();
        },0);
    }else if(isiOS){
        $("#test1").append("<p>IOS v4.0</p>");
        setTimeout(function () {
            document.getElementById('bgmMusic').src='a.mp3';
            },50);
    }else if(isweixing){
        $("#test1").append("<p>微信</p>");
    }else{
        $("#test1").append("<p>其他</p>");
    }
    $(function () {
        $.fn.snow({
            minSize: 5,		//雪花的最小尺寸
            maxSize: 50, 	//雪花的最大尺寸
            newOn: 120		//雪花出现的频率 这个数值越小雪花越多
        });
    });
</script>
<div id="mainDiv">
    <div id="content">
        <div id="code">
            <span class="comments">/**</span><br/>
            <span class="space"/><span class="comments">* 梅：2021年8月19日。</span><br/>
            <span class="space"/><span class="comments">* 我希望我们能记住我们这一时刻。</span><br/>
            <span class="space"/><span class="comments">*/</span><br/>
            <span style="font-size: 25px;">
				Girl u = <span class="keyword">new</span> Girl(<span class="string">"王宏梅"</span>);<br/>
				Boy i = <span class="keyword">new</span> Boy(<span class="string">"施旺国"</span>);<br/>
                    </span>
            <span class="comments">// 刚看到你那一时刻，就已经不能忘记你了！</span><br/>
            <span class="comments">// 当我凝视你的眼睛，当我听到你的声音 </span><br/>
            <span class="comments">//我感受到我的心在剧烈的跳，我明白了</span><br/>
          <span style="font-size: 20px;">我已经...你了!</span><br/>
            <span class="comments">// 在这里，我要鼓起勇气向你说</span><br/>
            <span class="comments" style="font-size: 45px;color: red;margin-top: 10px;">
                    &nbsp;..&nbsp;..&nbsp;♡我喜欢你♡ </span>
        </div>
        <div id="loveHeart">
            <canvas id="garden"></canvas>
            <div id="words">
                <div id="messages" >
                    王宏梅<span style='font-size:40px;color:#7d5886'>♡</span>施旺国相识了
                    <div id="elapseClock" > </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    var offsetX = $("#loveHeart").width() / 2;
    var offsetY = $("#loveHeart").height() / 2 - 55;
    var together = new Date();
    together.setFullYear(2021, 07, 19);
    together.setHours(19);
    together.setMinutes(25);
    together.setSeconds(0);
    together.setMilliseconds(0);

    if (!document.createElement('canvas').getContext) {
        var msg = document.createElement("div");
        msg.id = "errorMsg";
        msg.innerHTML = "Your browser doesn't support HTML5!<br/>Recommend use Chrome 14+/IE 9+/Firefox 7+/Safari 4+";
        document.body.appendChild(msg);
        $("#code").css("display", "none")
        $("#copyright").css("position", "absolute");
        $("#copyright").css("bottom", "10px");
        document.execCommand("stop");
    } else {
        setTimeout(function () {
            startHeartAnimation();
        }, 32000);

        timeElapse(together);
        setInterval(function () {
           timeElapse(together);
        }, 500);

        //adjustCodePosition();
        $("#code").typewriter();
    }

    window.onload = function(){
        initAudio();
    }
    var initAudio = function(){
        var audio = document.getElementById('bgmMusic');
        audio.play();
    }

    document.addEventListener('DOMContentLoaded', function () {
        function audioAutoPlay() {
            var audio = document.getElementById('bgmMusic');
            audio.play();
            document.addEventListener("WeixinJSBridgeReady", function () {
                audio.play();
            }, false);
        }
        audioAutoPlay();
    });
    //--创建触摸监听，当浏览器打开页面时，触摸屏幕触发事件，进行音频播放
    document.addEventListener('touchstart', function () {
        function audioAutoPlay() {
            var audio = document.getElementById('bgmMusic');
            audio.play();
        }
        audioAutoPlay();
    });
</script>
</body>
</html>
